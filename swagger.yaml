openapi: 3.0.3
info:
  title: Leafresh API Documentation
  description: |
    í™˜ê²½ë³´í˜¸ë¥¼ ì‹¤ì²œí•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•œ ì±Œë¦°ì§€ í”Œë«í¼ Leafreshì˜ ë°±ì—”ë“œ API ë¬¸ì„œì…ë‹ˆë‹¤.
    
    ## ğŸŒ± Leafresh ì†Œê°œ
    LeafreshëŠ” ê°œì¸ê³¼ ê·¸ë£¹ì´ í•¨ê»˜ ì§€ì†ê°€ëŠ¥í•œ ìƒí™œìŠµê´€ì„ ë§Œë“¤ì–´ê°€ë©°, 
    AI ê¸°ìˆ ë¡œ í™œë™ì„ ê²€ì¦í•˜ê³  ë³´ìƒì„ ì œê³µí•˜ëŠ” í™˜ê²½ë³´í˜¸ ì±Œë¦°ì§€ í”Œë«í¼ì…ë‹ˆë‹¤.
    
    ## ğŸ” ì¸ì¦ ë°©ë²•
    ëŒ€ë¶€ë¶„ì˜ APIëŠ” JWT í† í° ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤:
    ```
    Authorization: Bearer YOUR_JWT_TOKEN
    ```
    
    ## ğŸŒ ì„œë²„ í™˜ê²½
    - ê°œë°œ: https://springboot.dev-leafresh.app
    - í”„ë¡œë•ì…˜: https://api.leafresh.app
    
    ## ğŸ“ ì£¼ìš” ê¸°ëŠ¥
    - **OAuth ì¸ì¦**: ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì„ í†µí•œ íšŒì›ê°€ì…/ë¡œê·¸ì¸
    - **ê°œì¸ ì±Œë¦°ì§€**: ê°œì¸ë³„ í™˜ê²½ë³´í˜¸ ì±Œë¦°ì§€ ì°¸ì—¬
    - **ê·¸ë£¹ ì±Œë¦°ì§€**: ê·¸ë£¹ ë‹¨ìœ„ì˜ ì±Œë¦°ì§€ ì°¸ì—¬ ë° ê´€ë¦¬
    - **ì¸ì¦ ì‹œìŠ¤í…œ**: AI ê¸°ë°˜ í™œë™ ì¸ì¦ ë° ê²€ì¦
    - **í¬ì¸íŠ¸ ì‹œìŠ¤í…œ**: í™œë™ì— ëŒ€í•œ ë¦¬í”„ í¬ì¸íŠ¸ ì ë¦½
    - **ìƒì **: í¬ì¸íŠ¸ë¥¼ í™œìš©í•œ ìƒí’ˆ êµ¬ë§¤
    - **í”¼ë“œë°±**: ì¸ì¦ì— ëŒ€í•œ í”¼ë“œë°± ë° ëŒ“ê¸€
    - **ì±—ë´‡**: AI ê¸°ë°˜ ì±Œë¦°ì§€ ì¶”ì²œ
  version: '1.0.0'
  contact:
    name: Leafresh Team
    url: https://leafresh.app
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.leafresh.app
    description: í”„ë¡œë•ì…˜ ì„œë²„
  - url: https://springboot.dev-leafresh.app
    description: ê°œë°œ ì„œë²„
  - url: http://localhost:8080
    description: ë¡œì»¬ ê°œë°œ ì„œë²„

tags:
  - name: Health Check
    description: ì„œë²„ ìƒíƒœ í™•ì¸
  - name: OAuth
    description: OAuth ì¸ì¦ ê´€ë ¨ API
  - name: Member
    description: íšŒì› ê´€ë¦¬ API
  - name: Personal Challenge
    description: ê°œì¸ ì±Œë¦°ì§€ API
  - name: Group Challenge
    description: ê·¸ë£¹ ì±Œë¦°ì§€ API
  - name: Verification
    description: ì¸ì¦ ê´€ë ¨ API
  - name: Store
    description: ìƒì  ê´€ë ¨ API
  - name: Feedback
    description: í”¼ë“œë°± API
  - name: Chatbot
    description: ì±—ë´‡ API
  - name: Image
    description: ì´ë¯¸ì§€ ì—…ë¡œë“œ API

paths:
  /health:
    get:
      tags:
        - Health Check
      summary: ì„œë²„ ìƒíƒœ í™•ì¸
      description: ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
      responses:
        '200':
          description: ì„œë²„ê°€ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: UP
                  timestamp:
                    type: string
                    format: date-time
                    example: "2024-01-15T10:30:00Z"

  /member/kakao/callback:
    get:
      tags:
        - OAuth
      summary: ì¹´ì¹´ì˜¤ OAuth ì½œë°±
      description: ì¹´ì¹´ì˜¤ OAuth ì¸ì¦ í›„ ì¸ê°€ ì½”ë“œë¥¼ ë°›ì•„ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
          description: ì¹´ì¹´ì˜¤ì—ì„œ ë°œê¸‰í•œ ì¸ê°€ ì½”ë“œ
          example: "abc123"
      responses:
        '200':
          description: ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OAuthLoginResponse'
        '400':
          description: ì˜ëª»ëœ ì¸ê°€ ì½”ë“œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/members:
    get:
      tags:
        - Member
      summary: íšŒì› ì •ë³´ ì¡°íšŒ
      description: ë¡œê·¸ì¸í•œ íšŒì›ì˜ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: íšŒì› ì •ë³´ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemberInfoResponse'
        '401':
          description: ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ì
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    patch:
      tags:
        - Member
      summary: íšŒì› ì •ë³´ ìˆ˜ì •
      description: ë‹‰ë„¤ì„, ì´ë¯¸ì§€ URLì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MemberUpdateRequest'
      responses:
        '200':
          description: íšŒì› ì •ë³´ ìˆ˜ì • ì™„ë£Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemberUpdateResponse'

  /api/challenges/personal:
    get:
      tags:
        - Personal Challenge
      summary: ê°œì¸ ì±Œë¦°ì§€ ëª©ë¡ ì¡°íšŒ
      description: ìš”ì¼ë³„ ê°œì¸ ì±Œë¦°ì§€ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      parameters:
        - name: dayOfWeek
          in: query
          required: true
          schema:
            type: string
            enum: [MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY]
          description: ì¡°íšŒí•  ìš”ì¼
      responses:
        '200':
          description: ê°œì¸ ì±Œë¦°ì§€ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalChallengeListResponse'

  /api/challenges/personal/{challengeId}:
    get:
      tags:
        - Personal Challenge
      summary: ê°œì¸ ì±Œë¦°ì§€ ìƒì„¸ ì¡°íšŒ
      description: íŠ¹ì • ê°œì¸ ì±Œë¦°ì§€ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: challengeId
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: ì±Œë¦°ì§€ ID
      responses:
        '200':
          description: ê°œì¸ ì±Œë¦°ì§€ ìƒì„¸ ì •ë³´ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalChallengeDetailResponse'

  /api/challenges/personal/{challengeId}/rules:
    get:
      tags:
        - Personal Challenge
      summary: ê°œì¸ ì±Œë¦°ì§€ ì¸ì¦ ê·œì•½ ì¡°íšŒ
      description: ê°œì¸ ì±Œë¦°ì§€ì˜ ì¸ì¦ ê·œì•½ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      parameters:
        - name: challengeId
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: ì±Œë¦°ì§€ ID
      responses:
        '200':
          description: ê°œì¸ ì±Œë¦°ì§€ ì¸ì¦ ê·œì•½ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonalChallengeRuleResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT í† í°ì„ ì‚¬ìš©í•œ ì¸ì¦. 'Authorization: Bearer {token}' í˜•íƒœë¡œ ì „ì†¡

  schemas:
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
          description: ìš”ì²­ ì„±ê³µ ì—¬ë¶€
        message:
          type: string
          description: ì‘ë‹µ ë©”ì‹œì§€
        data:
          type: object
          description: ì‘ë‹µ ë°ì´í„°
        timestamp:
          type: string
          format: date-time
          description: ì‘ë‹µ ì‹œê°„

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            error:
              type: object
              properties:
                code:
                  type: string
                  description: ì—ëŸ¬ ì½”ë“œ
                message:
                  type: string
                  description: ì—ëŸ¬ ë©”ì‹œì§€

    OAuthLoginResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                isRegistered:
                  type: boolean
                  description: íšŒì›ê°€ì… ì™„ë£Œ ì—¬ë¶€
                email:
                  type: string
                  format: email
                  description: ì´ë©”ì¼ ì£¼ì†Œ
                nickname:
                  type: string
                  description: ë‹‰ë„¤ì„
                imageUrl:
                  type: string
                  format: uri
                  description: í”„ë¡œí•„ ì´ë¯¸ì§€ URL

    MemberInfoResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: íšŒì› ID
                email:
                  type: string
                  format: email
                  description: ì´ë©”ì¼
                nickname:
                  type: string
                  description: ë‹‰ë„¤ì„
                imageUrl:
                  type: string
                  format: uri
                  description: í”„ë¡œí•„ ì´ë¯¸ì§€ URL
                leafPoint:
                  type: integer
                  description: ë¦¬í”„ í¬ì¸íŠ¸
                joinDate:
                  type: string
                  format: date
                  description: ê°€ì…ì¼

    MemberUpdateRequest:
      type: object
      properties:
        nickname:
          type: string
          maxLength: 20
          description: ìƒˆë¡œìš´ ë‹‰ë„¤ì„
        imageUrl:
          type: string
          format: uri
          description: ìƒˆë¡œìš´ í”„ë¡œí•„ ì´ë¯¸ì§€ URL

    MemberUpdateResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: íšŒì› ID
                nickname:
                  type: string
                  description: ì—…ë°ì´íŠ¸ëœ ë‹‰ë„¤ì„
                imageUrl:
                  type: string
                  format: uri
                  description: ì—…ë°ì´íŠ¸ëœ í”„ë¡œí•„ ì´ë¯¸ì§€ URL

    PersonalChallengeListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                challenges:
                  type: array
                  items:
                    $ref: '#/components/schemas/PersonalChallenge'
                totalCount:
                  type: integer
                  description: ì „ì²´ ì±Œë¦°ì§€ ìˆ˜

    PersonalChallenge:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ì±Œë¦°ì§€ ID
        title:
          type: string
          description: ì±Œë¦°ì§€ ì œëª©
        description:
          type: string
          description: ì±Œë¦°ì§€ ì„¤ëª…
        imageUrl:
          type: string
          format: uri
          description: ì±Œë¦°ì§€ ì´ë¯¸ì§€ URL
        difficulty:
          type: string
          enum: [EASY, NORMAL, HARD]
          description: ë‚œì´ë„
        leafPoint:
          type: integer
          description: íšë“ ê°€ëŠ¥í•œ ë¦¬í”„ í¬ì¸íŠ¸
        dayOfWeek:
          type: string
          enum: [MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY]
          description: ì±Œë¦°ì§€ê°€ í™œì„±í™”ë˜ëŠ” ìš”ì¼
        isActive:
          type: boolean
          description: ì±Œë¦°ì§€ í™œì„±í™” ìƒíƒœ

    PersonalChallengeDetailResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              allOf:
                - $ref: '#/components/schemas/PersonalChallenge'
                - type: object
                  properties:
                    detailDescription:
                      type: string
                      description: ìƒì„¸ ì„¤ëª…
                    verificationGuide:
                      type: string
                      description: ì¸ì¦ ê°€ì´ë“œ
                    participantCount:
                      type: integer
                      description: ì°¸ê°€ì ìˆ˜
                    isParticipating:
                      type: boolean
                      description: í˜„ì¬ ì‚¬ìš©ì ì°¸ê°€ ì—¬ë¶€
                    todayVerified:
                      type: boolean
                      description: ì˜¤ëŠ˜ ì¸ì¦ ì™„ë£Œ ì—¬ë¶€

    PersonalChallengeRuleResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                challengeId:
                  type: integer
                  format: int64
                  description: ì±Œë¦°ì§€ ID
                title:
                  type: string
                  description: ì±Œë¦°ì§€ ì œëª©
                rules:
                  type: array
                  items:
                    type: string
                  description: ì¸ì¦ ê·œì•½ ëª©ë¡
                verificationMethod:
                  type: string
                  description: ì¸ì¦ ë°©ë²•
                exampleImages:
                  type: array
                  items:
                    type: string
                    format: uri
                  description: ì˜ˆì‹œ ì´ë¯¸ì§€ URL ëª©ë¡
